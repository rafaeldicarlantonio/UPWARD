# Ingest Policy Configuration
# Defines caps, tolerances, and constraints for the ingestion pipeline

# Role-specific policies for ingestion
roles:
  admin:
    max_concepts_per_file: 500
    max_frames_per_chunk: 50
    write_contradictions_to_memories: true
    allowed_frame_types:
      - claim
      - evidence
      - question
      - observation
      - hypothesis
      - conclusion
      - method
      - result
    contradiction_tolerance: 0.1  # 10% threshold for contradiction detection
    
  pro:
    max_concepts_per_file: 200
    max_frames_per_chunk: 30
    write_contradictions_to_memories: true
    allowed_frame_types:
      - claim
      - evidence
      - question
      - observation
      - hypothesis
      - conclusion
    contradiction_tolerance: 0.15
    
  scholars:
    max_concepts_per_file: 150
    max_frames_per_chunk: 25
    write_contradictions_to_memories: true
    allowed_frame_types:
      - claim
      - evidence
      - question
      - observation
    contradiction_tolerance: 0.2
    
  analytics:
    max_concepts_per_file: 100
    max_frames_per_chunk: 20
    write_contradictions_to_memories: true
    allowed_frame_types:
      - claim
      - evidence
      - observation
    contradiction_tolerance: 0.2
    
  general:
    max_concepts_per_file: 50
    max_frames_per_chunk: 10
    write_contradictions_to_memories: false  # Don't write contradictions for general users
    allowed_frame_types:
      - claim
      - evidence
    contradiction_tolerance: 0.3  # More tolerant for general users
    
  user:
    max_concepts_per_file: 30
    max_frames_per_chunk: 8
    write_contradictions_to_memories: false
    allowed_frame_types:
      - claim
    contradiction_tolerance: 0.3

# Default fallback policy (safe defaults)
default:
  max_concepts_per_file: 20
  max_frames_per_chunk: 5
  write_contradictions_to_memories: false
  allowed_frame_types:
    - claim
  contradiction_tolerance: 0.5  # Very conservative

# Global limits (cannot be exceeded regardless of role)
global_limits:
  max_concepts_per_file_absolute: 1000
  max_frames_per_chunk_absolute: 100
  max_edges_per_commit_absolute: 5000
  max_contradiction_score: 1.0
  min_contradiction_tolerance: 0.05
  max_contradiction_tolerance: 0.9
  
# Frame type definitions (for validation)
valid_frame_types:
  - claim
  - evidence
  - question
  - observation
  - hypothesis
  - conclusion
  - method
  - result
  - definition
  - example

# Policy metadata
version: "1.0"
description: "Ingest policy configuration for caps and tolerances"
